%{
#include <stdio.h>

int char_count = 0;
int line_count = 0;
int word_count = 0;
int in_word = 0;
%}

%x COMMENT

%%

"/*"        { BEGIN(COMMENT); }
<COMMENT>"*/"   { BEGIN(INITIAL); }
<COMMENT>.|\n   { /* Ignore comments */ }

[\n]        { line_count++; char_count++; }
[ \t\r]+    { if (in_word) { word_count++; in_word = 0; } }
[a-zA-Z0-9]+ { char_count += yyleng; in_word = 1; }
.|\n        { char_count++; }

%%

int main()
{
    yylex();
    if (in_word) word_count++;
    printf("Characters: %d\n", char_count);
    printf("Lines: %d\n", line_count);
    printf("Words: %d\n", word_count);
    return 0;
}

int yywrap()
{
    return 1;
}
